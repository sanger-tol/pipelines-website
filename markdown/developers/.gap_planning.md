---
title: Genome After-Party planning
subtitle: This page gives an overview of the changes we're planning for the Genome After-Party pipelines
---

# Assembly download pipeline

## Now {#insdcdownload-now}

### v3.0.0

- (feature) Generate a mapping file between accession numbers, chromosome numbers, and sequence names
- (feature) Generate a correct SAM header for the CRAM files

Both in review:

- <https://github.com/sanger-tol/insdcdownload/pull/47>
- <https://github.com/sanger-tol/insdcdownload/pull/48>

### v3.1.0

- Extra output file that lists the sequences in the correct order for contact maps
  - will be passed to `samtools faidx` when reordering is needed

# Read mapping

## Now {#readmapping-now}

> Numbering is uncertain as it depends on whether some changes happen or not, and whether they are breaking.

### 1.4.0 (TBC)

- (feature) Add an option to skip PacBio filtering/trimming
  - Assuming it's OK to use the untrimmed reads for variant-calling

### 1.5.0

- (feature) Chunked alignment for all data types, using the same commands as in the other sanger-tol pipelines
  - short reads – _done_
  - long reads – _in progress_
  - will need a review of the number of file conversions and the number of duplicated processes – _to do_
- (feature) PacBio pre-processing
  - optional HiFi-trimmer – _in progress_
  - optional ULI (single barcode) – _in progress_
- (feature) Better CRAM outputs – _in progress_

## Later {#readmapping-later}

> Tentatively grouped in releases, but the grouping is still uncertain at this stage.

### 1.6.0

- Generate a contact-map
  - Pretext format, with the annotation script run

### 2.0.0

- Replace the "sample" samplesheet column with two: one for the specimen and one for the sequencing run.
- Support for multiple barcodes
- Support for PiMMS
- ONT preprocessing
- Update the input parameter names and the output file names as per our new [standards]{#standards}.

### 2.1.0

- Support for RNA-Seq (Illumina, ISO-Seq, Kinnex)
  - May need specific stats on top of the basic `samtools stats`
- Update CPU/memory settings
  - impracticable to complete in time for the main release
- Support for UltimaGen data

## Long-term goal {#readmapping-longterm}

# Variant calling and composition

## Now {#variantcalling-now}

- (feature) expose options for filtering the VCF
  - For variantcomposition v0.2.0
- (feature) rearrange the outputs to be more practical
  - For variantcomposition v0.2.0
- (feature) remove features (except the stats) now in variantcomposition
  - For variantcalling v1.2.0
- (feature) make the merging of the input read alignment optional
  - For variantcalling v1.2.0
  - Will make it work with the new specimen/run_accession approach

## Later {#variantcalling-later}

- (feature) Add structural variation detection
  - For variantcalling v1.3.0
- Update the input parameter names and the output file names as per our new [standards]{#standards}.
  - TBC

# BlobToolKit

## Now {#blobtoolkit-now}

### 0.10.0

- (bug) BUSCO output tar files don't contain the sequences
- (feature) parameter validation for Blastn and BUSCO
- (bug) Fix accepting existing BUSCOs as input (useful for large genomes when we run BUSCO outside of the pipeline)

Release in review: <https://github.com/sanger-tol/blobtoolkit/pull/217>

### 0.11.0

- May need more static images. Compare with the genomenote pipeline
- Work off specimen and run_accession like the other pipelines
- Update the input parameter names and the output file names as per our new [standards]{#standards}.

## Later {#blobtoolkit-later}

## Long-term goal {#blobtoolkit-longterm}

- Accept pre-computed analyses and make all the embedded analyses optional
  - fasta_windows
  - Read coverage

# Genome note

## Later {#genomenote-later}

- Support for combined maps ?
  - For v2.3.0
- Drop HiGlass
  - For v2.3.0
- Support for pre-computed analyses ? (BUSCO, contact maps, BlobToolKit)
  - For even later. TBD
- Update the input parameter names and the output file names as per our new [standards]{#standards}.
  - TBC

## Long-term goal {#genomenote-longterm}

- Turn into a meta-pipeline that can run the other pipelines itself or take pre-existing outputs.
- Try to offload functionality to other, more specific, pipelines and to shared sub-workflows.
  - ancestral painting ???
  - annotation statistics -> make it a shared sub-workflow and embed in all future gene annotation pipelines. keep here in case the user feeds a GFF in
  - genome statistics ???
  - genome metadata -> remove
  - contact map -> move to readmapping
  - blobtk plots -> sync with blobtoolkit. We keep the functionality here to provide flexibility w.r.t. blobtoolkit releases

# BUSCO

## Later {#busco-later}

- Complete and release the pipeline v1.0.0
  - Regular BUSCO commands
  - Supports odb10 and odb12
  - Can find lineage automatically using the taxonomy
  - Make keeping the individual Fasta files an option
- Ancestral painting
  - For v1.1.0

## Long-term goal {#busco-longterm}

- Reinstate the Nextflow port of BUSCO (to run BUSCO on large genomes)

# Sequence composition

## Later {#sequencecomposition-later}

> This is a long list of features and we will need to decide whether all
> should be in this one pipeline, or split across multiple pipelines.

- (feature) Add simple repeat finders:
  - Low complexity repeats from `Dustmasker`.
  - Inverted repeats from `einverted`.
  - LTR retrotransposons from `LTRharvest` and `LTRdigest`.
  - Tandem repeats from `trf`.
  - Telomeric repeat annotation (tool to be confirmed).
  - Centromeric repeat annotation (tool to be confirmed).
- (feature) Add comprehensive repeat finders such as EarlGreyTE or EDTA2.
- (feature) Add TRASH and Pantera.
- (feature) Add stainedglass and/or ModDotPlot for self-alignment.
- (feature) Mappability tracks.
- (feature) Compute gene annotation with tools such as BRAKER, EGAPx, or Helixer

## Long-term goal {#sequencecomposition-longterm}

- Take these from genomenote
  - genomescope
  - smudgeplot
  - completeness and QV

# Ensembl download pipelines

## Later {#ensembldownloads-later}

- Support the new FTP / data release model of Ensembl
- The insdcdownload pipeline should:
  - download RefSeq annotation ?
- The ensemblgenedownload pipeline should
  - change the sequence names in the GFF file to match the accession numbers
  - compute the GFF stats and its BUSCO scores
  - compute gene density tracks
- The ensemblrepeatdownload pipeline should
  - compute repeat density tracks
  - download RepeatModeler models

## Long-term goal {#ensembldownloads-longterm}

- Rethink the naming / split of all download pipelines, e.g.:
  - combine the two Ensembl pipelines into one ?
  - pipeline to download from RefSeq (refseqdownload ?)
  - implement ENA support in insdcdownload ?
  - rename insdcdownload it ncbidownload
  - add GCA assembly support in nf-core/fetchngs ?

# Pipeline design standards {#standards}

All pipelines need a refresh to incorporate the [naming convention](/docs/usage/gap_conventions)
and make the input parameter names uniform.
Those changes will likely result in a _major_ release as the interface for using the pipeline changes.

## Now {#all-now}

- Avoid introducing new outputs that do not comply with the naming convention.
- Name new parameters in accordance with existing parameters across all Genome After-Party pipelines.
- If a _minor_ release is pending on the `dev` branch, rename the _newly-introduced_ input parameters
  and output files (if possible) to avoid having to do a major version bump soon after.
- If a _major_ release is pending on the `dev` branch, rename _all_ input parameters and output files
  _now_ to avoid having to do a major version bump soon after.

## Later {#all-later}

- For all other pipelines, plan a major version bump with all necessary changes, considering dependencies
  with other pipelines.
